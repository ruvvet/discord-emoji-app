<style>
  /* profile */
  .profile {
    color: white;
    text-align: center;
    overflow: hidden;
  }
  .profile-div {
    height: 100%;
    width: 100%;
    position: relative;

  }
  .profile-icon {
    height: 100%;
    width: 100%;
    border-top-left-radius: 10px;
  }

  .profile-name {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 3em;

    overflow-wrap: break-word;
    word-wrap: break-word;
    text-shadow: 2px 2px 4px #000000;
    text-transform: uppercase;
  }

  .profile-div:hover {
    color: #7289da;
    filter: grayscale(50%);
  }


</style>

<div class="profile" id="profile"></div>

<script>
  window.addEventListener('DOMContentLoaded', async () => {
    const response = await fetch('http://localhost:5000/profile').catch(
      () => null
    );
    const data = await response.json();
    if (!response) {
      document.getElementById('profile').textContent = 'please login';
    } else {
      let profile = document.getElementById('profile');

      let profileDiv = document.createElement('div');
      profileDiv.setAttribute('class', 'profile-div');
      profile.appendChild(profileDiv);

      let pfp = document.createElement('img');
      pfp.setAttribute('class', 'profile-icon');
      pfp.src = `https://cdn.discordapp.com/avatars/${data.user.id}/${data.user.avatar}.png`;
      profileDiv.appendChild(pfp);

      let username = document.createElement('div');
      username.setAttribute('class', 'profile-name');
      username.textContent = `${data.user.username}`;
      profileDiv.appendChild(username);
    }
  });
</script>
