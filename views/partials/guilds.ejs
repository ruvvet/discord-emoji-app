<script>
  window.addEventListener('DOMContentLoaded', async () => {
    const response = await fetch('http://localhost:5000/guilds').catch(() => null);
    const data = await response.json();
        const guilds = data.guilds;
        guilds.forEach((guild) => {
          let guildList = document.getElementById('guild-ul');

          let guildLI = document.createElement('li');
          guildLI.setAttribute('class', 'guild-li');
          guildList.appendChild(guildLI);

          let guildDiv = document.createElement('div');
          guildDiv.setAttribute('class', 'guild-div');
          guildLI.appendChild(guildDiv);


          let guildIcon = document.createElement('img');
          guildIcon.setAttribute('class', 'guild-icon');
          guildIcon.src = `https://cdn.discordapp.com/icons/${guild.id}/${guild.icon}.png`;
          guildDiv.appendChild(guildIcon);

          let guildName = document.createElement('div');
          guildName.setAttribute('class', 'guild-name');
          guildName.textContent = `${guild.name}`;
          guildDiv.appendChild(guildName);
        });
  });
</script>

<div id="guild" class="guild">
  <ul id="guild-ul"></ul>
</div>
